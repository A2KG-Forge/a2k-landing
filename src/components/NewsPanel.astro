---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const newsItems = await getCollection('blog');
const sortedNews = newsItems.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---

<section class="py-20 bg-zinc-800 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-3xl font-light text-white text-center mb-16">OUR LATEST NEWS</h2>

    <div class="grid md:grid-cols-4 gap-6">
      {
        sortedNews.slice(0, 4).map(item => (
          <div class="bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-700 transition-colors cursor-pointer">
            <a href={`/blog/${item.id}`} class="block">
              {item.data.heroImage ? (
                <Image
                  src={item.data.heroImage}
                  alt={item.data.title}
                  width={400}
                  height={192}
                  class="w-full h-48 object-cover"
                />
              ) : (
                <div class="w-full h-48 bg-gray-600 flex items-center justify-center">
                  <span class="text-gray-200">No image</span>
                </div>
              )}
              <div class="p-6">
                <h3 class="text-lg font-semibold mb-3 line-clamp-2 text-gray-100">
                  {item.data.title}
                </h3>
                <p class="text-gray-300 text-sm mb-4">
                  {item.data.pubDate.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                  })}
                </p>
                <span class="text-[#f6ad55] hover:text-[#ed8936] text-sm font-medium">
                  Read more
                </span>
              </div>
            </a>
          </div>
        ))
      }
    </div>

    <div class="text-center mt-12">
      <a
        href="/blog"
        class="inline-block px-8 py-3 border border-white hover:bg-white hover:text-zinc-900 transition-colors duration-300"
      >
        MORE NEWS
      </a>
    </div>
  </div>
</section>
